import{E as Tt}from"./web3-db635edc.js";import{T as Y,a as St,b as wt,S as Nt,l as bt,c as Pe,d as De,D as Lt,e as Ot,f as At,g as xt}from"./index-8a2607d9.js";import{g as _t,b as Pt}from"./index-46a986ed.js";import"./preload-helper-f8a04cdf.js";import"./index-e63e67ba.js";var le=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(u){try{o(n.next(u))}catch(h){a(h)}}function l(u){try{o(n.throw(u))}catch(h){a(h)}}function o(u){u.done?s(u.value):i(u.value).then(c,l)}o((n=n.apply(r,e||[])).next())})},ce=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=o[0]&2?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){t.label=o[1];break}if(o[0]===6&&t.label<s[1]){t.label=s[1],s=o;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(o);break}s[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(u){o=[6,u],i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Dt=globalThis&&globalThis.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return s},Ct=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Ut=globalThis&&globalThis.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gt=function(){function r(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new Tt,this.send=function(t,n,i,s,a,c){return a===void 0&&(a=Buffer.alloc(0)),c===void 0&&(c=[Nt.OK]),le(e,void 0,void 0,function(){var l,o;return ce(this,function(u){switch(u.label){case 0:if(a.length>=256)throw new Y("data.length exceed 256 bytes limit. Got: "+a.length,"DataLengthTooBig");return[4,this.exchange(Buffer.concat([Buffer.from([t,n,i,s]),Buffer.from([a.length]),a]))];case 1:if(l=u.sent(),o=l.readUInt16BE(l.length-2),!c.some(function(h){return h===o}))throw new St(o);return[2,l]}})})},this.exchangeAtomicImpl=function(t){return le(e,void 0,void 0,function(){var n,i,s,a,c,l=this;return ce(this,function(o){switch(o.label){case 0:if(this.exchangeBusyPromise)throw new wt("An action was already pending on the Ledger device. Please deny or reconnect.");i=new Promise(function(u){n=u}),this.exchangeBusyPromise=i,s=!1,a=setTimeout(function(){s=!0,l.emit("unresponsive")},this.unresponsiveTimeout),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,t()];case 2:return c=o.sent(),s&&this.emit("responsive"),[2,c];case 3:return clearTimeout(a),n&&n(),this.exchangeBusyPromise=null,[7];case 4:return[2]}})})},this._appAPIlock=null}return r.prototype.exchange=function(e){throw new Error("exchange not implemented")},r.prototype.setScrambleKey=function(e){},r.prototype.close=function(){return Promise.resolve()},r.prototype.on=function(e,t){this._events.on(e,t)},r.prototype.off=function(e,t){this._events.removeListener(e,t)},r.prototype.emit=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(t=this._events).emit.apply(t,Ct([e],Dt(n),!1))},r.prototype.setDebugMode=function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},r.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},r.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},r.create=function(e,t){var n=this;return e===void 0&&(e=3e3),new Promise(function(i,s){var a=!1,c=n.listen({next:function(o){a=!0,c&&c.unsubscribe(),l&&clearTimeout(l),n.open(o.descriptor,e).then(i,s)},error:function(o){l&&clearTimeout(l),s(o)},complete:function(){l&&clearTimeout(l),a||s(new Y(n.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),l=t?setTimeout(function(){c.unsubscribe(),s(new Y(n.ErrorMessage_ListenTimeout,"ListenTimeout"))},t):null})},r.prototype.decorateAppAPIMethods=function(e,t,n){var i,s;try{for(var a=Ut(t),c=a.next();!c.done;c=a.next()){var l=c.value;e[l]=this.decorateAppAPIMethod(l,e[l],e,n)}}catch(o){i={error:o}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},r.prototype.decorateAppAPIMethod=function(e,t,n,i){var s=this;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return le(s,void 0,void 0,function(){var l;return ce(this,function(o){switch(o.label){case 0:if(l=this._appAPIlock,l)return[2,Promise.reject(new Y("Ledger Device is busy (lock "+l+")","TransportLocked"))];o.label=1;case 1:return o.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(i),[4,t.apply(n,a)];case 2:return[2,o.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}})})}},r.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",r.ErrorMessage_NoDeviceFound="No Ledger device found",r}(),dt={},Bt=_t(bt);(function(r){r.__esModule=!0;var e=Bt,t=5;function n(a){var c=Buffer.alloc(2);return c.writeUInt16BE(a,0),c}var i={data:Buffer.alloc(0),dataLength:0,sequence:0},s=function(a,c){return{makeBlocks:function(l){var o=Buffer.concat([n(l.length),l]),u=c-5,h=Math.ceil(o.length/u);o=Buffer.concat([o,Buffer.alloc(h*u-o.length+1).fill(0)]);for(var p=[],f=0;f<h;f++){var R=Buffer.alloc(5);R.writeUInt16BE(a,0),R.writeUInt8(t,2),R.writeUInt16BE(f,3);var H=o.slice(f*u,(f+1)*u);p.push(Buffer.concat([R,H]))}return p},reduceResponse:function(l,o){var u=l||i,h=u.data,p=u.dataLength,f=u.sequence;if(o.readUInt16BE(0)!==a)throw new e.TransportError("Invalid channel","InvalidChannel");if(o.readUInt8(2)!==t)throw new e.TransportError("Invalid tag","InvalidTag");if(o.readUInt16BE(3)!==f)throw new e.TransportError("Invalid sequence","InvalidSequence");l||(p=o.readUInt16BE(5)),f++;var R=o.slice(l?5:7);return h=Buffer.concat([h,R]),h.length>p&&(h=h.slice(0,p)),{data:h,dataLength:p,sequence:f}},getReducedResult:function(l){if(l&&l.dataLength===l.data.length)return l.data}}};r.default=s})(dt);var Ft=Pt(dt),O={exports:{}};const Xt="2.0.0",jt=256,Mt=Number.MAX_SAFE_INTEGER||9007199254740991,Vt=16;var re={SEMVER_SPEC_VERSION:Xt,MAX_LENGTH:jt,MAX_SAFE_INTEGER:Mt,MAX_SAFE_COMPONENT_LENGTH:Vt};const qt=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var ne=qt;(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t}=re,n=ne;e=r.exports={};const i=e.re=[],s=e.src=[],a=e.t={};let c=0;const l=(o,u,h)=>{const p=c++;n(o,p,u),a[o]=p,s[p]=u,i[p]=new RegExp(u,h?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),l("FULL",`^${s[a.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),l("LOOSE",`^${s[a.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),l("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),l("COERCERTL",s[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",l("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",l("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(O,O.exports);const zt=["includePrerelease","loose","rtl"],Ht=r=>r?typeof r!="object"?{loose:!0}:zt.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};var se=Ht;const Ce=/^[0-9]+$/,Et=(r,e)=>{const t=Ce.test(r),n=Ce.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},Yt=(r,e)=>Et(e,r);var $e={compareIdentifiers:Et,rcompareIdentifiers:Yt};const k=ne,{MAX_LENGTH:Ue,MAX_SAFE_INTEGER:K}=re,{re:Ge,t:Be}=O.exports,kt=se,{compareIdentifiers:U}=$e;class T{constructor(e,t){if(t=kt(t),e instanceof T){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Ue)throw new TypeError(`version is longer than ${Ue} characters`);k("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?Ge[Be.LOOSE]:Ge[Be.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>K||this.major<0)throw new TypeError("Invalid major version");if(this.minor>K||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>K||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<K)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(k("SemVer.compare",this.version,this.options,e),!(e instanceof T)){if(typeof e=="string"&&e===this.version)return 0;e=new T(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof T||(e=new T(e,this.options)),U(this.major,e.major)||U(this.minor,e.minor)||U(this.patch,e.patch)}comparePre(e){if(e instanceof T||(e=new T(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(k("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return U(n,i)}while(++t)}compareBuild(e){e instanceof T||(e=new T(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(k("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return U(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(U(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var y=T;const{MAX_LENGTH:Kt}=re,{re:Fe,t:Xe}=O.exports,je=y,Wt=se,Zt=(r,e)=>{if(e=Wt(e),r instanceof je)return r;if(typeof r!="string"||r.length>Kt||!(e.loose?Fe[Xe.LOOSE]:Fe[Xe.FULL]).test(r))return null;try{return new je(r,e)}catch{return null}};var F=Zt;const Jt=F,Qt=(r,e)=>{const t=Jt(r,e);return t?t.version:null};var er=Qt;const tr=F,rr=(r,e)=>{const t=tr(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var nr=rr;const Me=y,sr=(r,e,t,n)=>{typeof t=="string"&&(n=t,t=void 0);try{return new Me(r instanceof Me?r.version:r,t).inc(e,n).version}catch{return null}};var ir=sr;const Ve=y,ar=(r,e,t)=>new Ve(r,t).compare(new Ve(e,t));var w=ar;const or=w,lr=(r,e,t)=>or(r,e,t)===0;var Se=lr;const qe=F,cr=Se,ur=(r,e)=>{if(cr(r,e))return null;{const t=qe(r),n=qe(e),i=t.prerelease.length||n.prerelease.length,s=i?"pre":"",a=i?"prerelease":"";for(const c in t)if((c==="major"||c==="minor"||c==="patch")&&t[c]!==n[c])return s+c;return a}};var hr=ur;const fr=y,pr=(r,e)=>new fr(r,e).major;var vr=pr;const dr=y,Er=(r,e)=>new dr(r,e).minor;var mr=Er;const gr=y,$r=(r,e)=>new gr(r,e).patch;var yr=$r;const Ir=F,Rr=(r,e)=>{const t=Ir(r,e);return t&&t.prerelease.length?t.prerelease:null};var Tr=Rr;const Sr=w,wr=(r,e,t)=>Sr(e,r,t);var Nr=wr;const br=w,Lr=(r,e)=>br(r,e,!0);var Or=Lr;const ze=y,Ar=(r,e,t)=>{const n=new ze(r,t),i=new ze(e,t);return n.compare(i)||n.compareBuild(i)};var we=Ar;const xr=we,_r=(r,e)=>r.sort((t,n)=>xr(t,n,e));var Pr=_r;const Dr=we,Cr=(r,e)=>r.sort((t,n)=>Dr(n,t,e));var Ur=Cr;const Gr=w,Br=(r,e,t)=>Gr(r,e,t)>0;var ie=Br;const Fr=w,Xr=(r,e,t)=>Fr(r,e,t)<0;var Ne=Xr;const jr=w,Mr=(r,e,t)=>jr(r,e,t)!==0;var mt=Mr;const Vr=w,qr=(r,e,t)=>Vr(r,e,t)>=0;var be=qr;const zr=w,Hr=(r,e,t)=>zr(r,e,t)<=0;var Le=Hr;const Yr=Se,kr=mt,Kr=ie,Wr=be,Zr=Ne,Jr=Le,Qr=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Yr(r,t,n);case"!=":return kr(r,t,n);case">":return Kr(r,t,n);case">=":return Wr(r,t,n);case"<":return Zr(r,t,n);case"<=":return Jr(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var gt=Qr;const en=y,tn=F,{re:W,t:Z}=O.exports,rn=(r,e)=>{if(r instanceof en)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(W[Z.COERCE]);else{let n;for(;(n=W[Z.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),W[Z.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;W[Z.COERCERTL].lastIndex=-1}return t===null?null:tn(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};var nn=rn,sn=v;v.Node=C;v.create=v;function v(r){var e=this;if(e instanceof v||(e=new v),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}v.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};v.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};v.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};v.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)on(this,arguments[r]);return this.length};v.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)ln(this,arguments[r]);return this.length};v.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};v.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};v.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};v.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};v.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};v.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};v.prototype.map=function(r,e){e=e||this;for(var t=new v,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};v.prototype.mapReverse=function(r,e){e=e||this;for(var t=new v,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};v.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};v.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};v.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};v.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};v.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new v;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};v.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new v;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};v.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=an(this,i,t[n]);return s};v.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function an(r,e,t){var n=e===r.head?new C(t,null,e,r):new C(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function on(r,e){r.tail=new C(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function ln(r,e){r.head=new C(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function C(r,e,t,n){if(!(this instanceof C))return new C(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{require("./iterator.js")(v)}catch{}const cn=sn,P=Symbol("max"),L=Symbol("length"),G=Symbol("lengthCalculator"),q=Symbol("allowStale"),D=Symbol("maxAge"),b=Symbol("dispose"),He=Symbol("noDisposeOnSet"),E=Symbol("lruList"),S=Symbol("cache"),$t=Symbol("updateAgeOnGet"),ue=()=>1;class un{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[P]=e.max||1/0;const t=e.length||ue;if(this[G]=typeof t!="function"?ue:t,this[q]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[D]=e.maxAge||0,this[b]=e.dispose,this[He]=e.noDisposeOnSet||!1,this[$t]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[P]=e||1/0,j(this)}get max(){return this[P]}set allowStale(e){this[q]=!!e}get allowStale(){return this[q]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[D]=e,j(this)}get maxAge(){return this[D]}set lengthCalculator(e){typeof e!="function"&&(e=ue),e!==this[G]&&(this[G]=e,this[L]=0,this[E].forEach(t=>{t.length=this[G](t.value,t.key),this[L]+=t.length})),j(this)}get lengthCalculator(){return this[G]}get length(){return this[L]}get itemCount(){return this[E].length}rforEach(e,t){t=t||this;for(let n=this[E].tail;n!==null;){const i=n.prev;Ye(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[E].head;n!==null;){const i=n.next;Ye(this,e,n,t),n=i}}keys(){return this[E].toArray().map(e=>e.key)}values(){return this[E].toArray().map(e=>e.value)}reset(){this[b]&&this[E]&&this[E].length&&this[E].forEach(e=>this[b](e.key,e.value)),this[S]=new Map,this[E]=new cn,this[L]=0}dump(){return this[E].map(e=>ee(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[E]}set(e,t,n){if(n=n||this[D],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,s=this[G](t,e);if(this[S].has(e)){if(s>this[P])return B(this,this[S].get(e)),!1;const l=this[S].get(e).value;return this[b]&&(this[He]||this[b](e,l.value)),l.now=i,l.maxAge=n,l.value=t,this[L]+=s-l.length,l.length=s,this.get(e),j(this),!0}const a=new hn(e,t,s,i,n);return a.length>this[P]?(this[b]&&this[b](e,t),!1):(this[L]+=a.length,this[E].unshift(a),this[S].set(e,this[E].head),j(this),!0)}has(e){if(!this[S].has(e))return!1;const t=this[S].get(e).value;return!ee(this,t)}get(e){return he(this,e,!0)}peek(e){return he(this,e,!1)}pop(){const e=this[E].tail;return e?(B(this,e),e.value):null}del(e){B(this,this[S].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const a=s-t;a>0&&this.set(i.k,i.v,a)}}}prune(){this[S].forEach((e,t)=>he(this,t,!1))}}const he=(r,e,t)=>{const n=r[S].get(e);if(n){const i=n.value;if(ee(r,i)){if(B(r,n),!r[q])return}else t&&(r[$t]&&(n.value.now=Date.now()),r[E].unshiftNode(n));return i.value}},ee=(r,e)=>{if(!e||!e.maxAge&&!r[D])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[D]&&t>r[D]},j=r=>{if(r[L]>r[P])for(let e=r[E].tail;r[L]>r[P]&&e!==null;){const t=e.prev;B(r,e),e=t}},B=(r,e)=>{if(e){const t=e.value;r[b]&&r[b](t.key,t.value),r[L]-=t.length,r[S].delete(t.key),r[E].removeNode(e)}};class hn{constructor(e,t,n,i,s){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=s||0}}const Ye=(r,e,t,n)=>{let i=t.value;ee(r,i)&&(B(r,t),r[q]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};var fn=un;class z{constructor(e,t){if(t=vn(t),e instanceof z)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new z(e.raw,t);if(e instanceof ye)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const n=this.set[0];if(this.set=this.set.filter(i=>!Ke(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(const i of this.set)if(i.length===1&&$n(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=ke.get(n);if(i)return i;const s=this.options.loose,a=s?I[g.HYPHENRANGELOOSE]:I[g.HYPHENRANGE];e=e.replace(a,On(this.options.includePrerelease)),d("hyphen replace",e),e=e.replace(I[g.COMPARATORTRIM],En),d("comparator trim",e),e=e.replace(I[g.TILDETRIM],mn),e=e.replace(I[g.CARETTRIM],gn),e=e.split(/\s+/).join(" ");let c=e.split(" ").map(h=>yn(h,this.options)).join(" ").split(/\s+/).map(h=>Ln(h,this.options));s&&(c=c.filter(h=>(d("loose invalid filter",h,this.options),!!h.match(I[g.COMPARATORLOOSE])))),d("range list",c);const l=new Map,o=c.map(h=>new ye(h,this.options));for(const h of o){if(Ke(h))return[h];l.set(h.value,h)}l.size>1&&l.has("")&&l.delete("");const u=[...l.values()];return ke.set(n,u),u}intersects(e,t){if(!(e instanceof z))throw new TypeError("a Range is required");return this.set.some(n=>We(n,t)&&e.set.some(i=>We(i,t)&&n.every(s=>i.every(a=>s.intersects(a,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new dn(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(An(this.set[t],e,this.options))return!0;return!1}}var N=z;const pn=fn,ke=new pn({max:1e3}),vn=se,ye=ae,d=ne,dn=y,{re:I,t:g,comparatorTrimReplace:En,tildeTrimReplace:mn,caretTrimReplace:gn}=O.exports,Ke=r=>r.value==="<0.0.0-0",$n=r=>r.value==="",We=(r,e)=>{let t=!0;const n=r.slice();let i=n.pop();for(;t&&n.length;)t=n.every(s=>i.intersects(s,e)),i=n.pop();return t},yn=(r,e)=>(d("comp",r,e),r=Tn(r,e),d("caret",r),r=In(r,e),d("tildes",r),r=wn(r,e),d("xrange",r),r=bn(r,e),d("stars",r),r),$=r=>!r||r.toLowerCase()==="x"||r==="*",In=(r,e)=>r.trim().split(/\s+/).map(t=>Rn(t,e)).join(" "),Rn=(r,e)=>{const t=e.loose?I[g.TILDELOOSE]:I[g.TILDE];return r.replace(t,(n,i,s,a,c)=>{d("tilde",r,n,i,s,a,c);let l;return $(i)?l="":$(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:$(a)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:c?(d("replaceTilde pr",c),l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,d("tilde return",l),l})},Tn=(r,e)=>r.trim().split(/\s+/).map(t=>Sn(t,e)).join(" "),Sn=(r,e)=>{d("caret",r,e);const t=e.loose?I[g.CARETLOOSE]:I[g.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,s,a,c,l)=>{d("caret",r,i,s,a,c,l);let o;return $(s)?o="":$(a)?o=`>=${s}.0.0${n} <${+s+1}.0.0-0`:$(c)?s==="0"?o=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:o=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:l?(d("replaceCaret pr",l),s==="0"?a==="0"?o=`>=${s}.${a}.${c}-${l} <${s}.${a}.${+c+1}-0`:o=`>=${s}.${a}.${c}-${l} <${s}.${+a+1}.0-0`:o=`>=${s}.${a}.${c}-${l} <${+s+1}.0.0-0`):(d("no pr"),s==="0"?a==="0"?o=`>=${s}.${a}.${c}${n} <${s}.${a}.${+c+1}-0`:o=`>=${s}.${a}.${c}${n} <${s}.${+a+1}.0-0`:o=`>=${s}.${a}.${c} <${+s+1}.0.0-0`),d("caret return",o),o})},wn=(r,e)=>(d("replaceXRanges",r,e),r.split(/\s+/).map(t=>Nn(t,e)).join(" ")),Nn=(r,e)=>{r=r.trim();const t=e.loose?I[g.XRANGELOOSE]:I[g.XRANGE];return r.replace(t,(n,i,s,a,c,l)=>{d("xRange",r,n,i,s,a,c,l);const o=$(s),u=o||$(a),h=u||$(c),p=h;return i==="="&&p&&(i=""),l=e.includePrerelease?"-0":"",o?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(u&&(a=0),c=0,i===">"?(i=">=",u?(s=+s+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",u?s=+s+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+s}.${a}.${c}${l}`):u?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:h&&(n=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),d("xRange return",n),n})},bn=(r,e)=>(d("replaceStars",r,e),r.trim().replace(I[g.STAR],"")),Ln=(r,e)=>(d("replaceGTE0",r,e),r.trim().replace(I[e.includePrerelease?g.GTE0PRE:g.GTE0],"")),On=r=>(e,t,n,i,s,a,c,l,o,u,h,p,f)=>($(n)?t="":$(i)?t=`>=${n}.0.0${r?"-0":""}`:$(s)?t=`>=${n}.${i}.0${r?"-0":""}`:a?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,$(o)?l="":$(u)?l=`<${+o+1}.0.0-0`:$(h)?l=`<${o}.${+u+1}.0-0`:p?l=`<=${o}.${u}.${h}-${p}`:r?l=`<${o}.${u}.${+h+1}-0`:l=`<=${l}`,`${t} ${l}`.trim()),An=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(d(r[n].semver),r[n].semver!==ye.ANY&&r[n].semver.prerelease.length>0){const i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},M=Symbol("SemVer ANY");class te{static get ANY(){return M}constructor(e,t){if(t=xn(t),e instanceof te){if(e.loose===!!t.loose)return e;e=e.value}pe("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===M?this.value="":this.value=this.operator+this.semver.version,pe("comp",this)}parse(e){const t=this.options.loose?Ze[Je.COMPARATORLOOSE]:Ze[Je.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Qe(n[2],this.options.loose):this.semver=M}toString(){return this.value}test(e){if(pe("Comparator.test",e,this.options.loose),this.semver===M||e===M)return!0;if(typeof e=="string")try{e=new Qe(e,this.options)}catch{return!1}return fe(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof te))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new et(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new et(this.value,t).test(e.semver);const n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),c=fe(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),l=fe(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||s&&a||c||l}}var ae=te;const xn=se,{re:Ze,t:Je}=O.exports,fe=gt,pe=ne,Qe=y,et=N,_n=N,Pn=(r,e,t)=>{try{e=new _n(e,t)}catch{return!1}return e.test(r)};var oe=Pn;const Dn=N,Cn=(r,e)=>new Dn(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var Un=Cn;const Gn=y,Bn=N,Fn=(r,e,t)=>{let n=null,i=null,s=null;try{s=new Bn(e,t)}catch{return null}return r.forEach(a=>{s.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new Gn(n,t))}),n};var Xn=Fn;const jn=y,Mn=N,Vn=(r,e,t)=>{let n=null,i=null,s=null;try{s=new Mn(e,t)}catch{return null}return r.forEach(a=>{s.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new jn(n,t))}),n};var qn=Vn;const ve=y,zn=N,tt=ie,Hn=(r,e)=>{r=new zn(r,e);let t=new ve("0.0.0");if(r.test(t)||(t=new ve("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){const i=r.set[n];let s=null;i.forEach(a=>{const c=new ve(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!s||tt(c,s))&&(s=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!t||tt(t,s))&&(t=s)}return t&&r.test(t)?t:null};var Yn=Hn;const kn=N,Kn=(r,e)=>{try{return new kn(r,e).range||"*"}catch{return null}};var Wn=Kn;const Zn=y,yt=ae,{ANY:Jn}=yt,Qn=N,es=oe,rt=ie,nt=Ne,ts=Le,rs=be,ns=(r,e,t,n)=>{r=new Zn(r,n),e=new Qn(e,n);let i,s,a,c,l;switch(t){case">":i=rt,s=ts,a=nt,c=">",l=">=";break;case"<":i=nt,s=rs,a=rt,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(es(r,e,n))return!1;for(let o=0;o<e.set.length;++o){const u=e.set[o];let h=null,p=null;if(u.forEach(f=>{f.semver===Jn&&(f=new yt(">=0.0.0")),h=h||f,p=p||f,i(f.semver,h.semver,n)?h=f:a(f.semver,p.semver,n)&&(p=f)}),h.operator===c||h.operator===l||(!p.operator||p.operator===c)&&s(r,p.semver))return!1;if(p.operator===l&&a(r,p.semver))return!1}return!0};var Oe=ns;const ss=Oe,is=(r,e,t)=>ss(r,e,">",t);var as=is;const os=Oe,ls=(r,e,t)=>os(r,e,"<",t);var cs=ls;const st=N,us=(r,e,t)=>(r=new st(r,t),e=new st(e,t),r.intersects(e));var hs=us;const fs=oe,ps=w;var vs=(r,e,t)=>{const n=[];let i=null,s=null;const a=r.sort((u,h)=>ps(u,h,t));for(const u of a)fs(u,e,t)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const c=[];for(const[u,h]of n)u===h?c.push(u):!h&&u===a[0]?c.push("*"):h?u===a[0]?c.push(`<=${h}`):c.push(`${u} - ${h}`):c.push(`>=${u}`);const l=c.join(" || "),o=typeof e.raw=="string"?e.raw:String(e);return l.length<o.length?l:e};const it=N,Q=ae,{ANY:de}=Q,V=oe,Ae=w,ds=(r,e,t={})=>{if(r===e)return!0;r=new it(r,t),e=new it(e,t);let n=!1;e:for(const i of r.set){for(const s of e.set){const a=Es(i,s,t);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},Es=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===de){if(e.length===1&&e[0].semver===de)return!0;t.includePrerelease?r=[new Q(">=0.0.0-0")]:r=[new Q(">=0.0.0")]}if(e.length===1&&e[0].semver===de){if(t.includePrerelease)return!0;e=[new Q(">=0.0.0")]}const n=new Set;let i,s;for(const f of r)f.operator===">"||f.operator===">="?i=at(i,f,t):f.operator==="<"||f.operator==="<="?s=ot(s,f,t):n.add(f.semver);if(n.size>1)return null;let a;if(i&&s){if(a=Ae(i.semver,s.semver,t),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const f of n){if(i&&!V(f,String(i),t)||s&&!V(f,String(s),t))return null;for(const R of e)if(!V(f,String(R),t))return!1;return!0}let c,l,o,u,h=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const f of e){if(u=u||f.operator===">"||f.operator===">=",o=o||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(c=at(i,f,t),c===f&&c!==i)return!1}else if(i.operator===">="&&!V(i.semver,String(f),t))return!1}if(s){if(h&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===h.major&&f.semver.minor===h.minor&&f.semver.patch===h.patch&&(h=!1),f.operator==="<"||f.operator==="<="){if(l=ot(s,f,t),l===f&&l!==s)return!1}else if(s.operator==="<="&&!V(s.semver,String(f),t))return!1}if(!f.operator&&(s||i)&&a!==0)return!1}return!(i&&o&&!s&&a!==0||s&&u&&!i&&a!==0||p||h)},at=(r,e,t)=>{if(!r)return e;const n=Ae(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},ot=(r,e,t)=>{if(!r)return e;const n=Ae(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};var ms=ds;const Ee=O.exports;var lt={re:Ee.re,src:Ee.src,tokens:Ee.t,SEMVER_SPEC_VERSION:re.SEMVER_SPEC_VERSION,SemVer:y,compareIdentifiers:$e.compareIdentifiers,rcompareIdentifiers:$e.rcompareIdentifiers,parse:F,valid:er,clean:nr,inc:ir,diff:hr,major:vr,minor:mr,patch:yr,prerelease:Tr,compare:w,rcompare:Nr,compareLoose:Or,compareBuild:we,sort:Pr,rsort:Ur,gt:ie,lt:Ne,eq:Se,neq:mt,gte:be,lte:Le,cmp:gt,coerce:nn,Comparator:ae,Range:N,satisfies:oe,toComparators:Un,maxSatisfying:Xn,minSatisfying:qn,minVersion:Yn,validRange:Wn,outside:Oe,gtr:as,ltr:cs,intersects:hs,simplifyRange:vs,subset:ms},Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ie.apply(this,arguments)},A,m;(function(r){r.blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.nanoFTS="nanoFTS"})(m||(m={}));var Re=(A={},A[m.blue]={id:m.blue,productName:"Ledger\xA0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(r){return 4*1024}},A[m.nanoS]={id:m.nanoS,productName:"Ledger\xA0Nano\xA0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(r){var e;return lt.lt((e=lt.coerce(r))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},A[m.nanoSP]={id:m.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(r){return 32}},A[m.nanoX]={id:m.nanoX,productName:"Ledger\xA0Nano\xA0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},A[m.nanoFTS]={id:m.nanoFTS,productName:"Ledger\xA0Nano\xA0FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2*1024*1024,masks:[857735168],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},A);m.blue,m.nanoS,m.nanoSP,m.nanoX,m.nanoFTS;var ct=Object.values(Re),It=11415,ut=function(r){var e=ct.find(function(i){return i.legacyUsbProductId===r});if(e)return e;var t=r>>8,n=ct.find(function(i){return i.productIdMM===t});return n},gs=[],ht={};for(var $s in Re){var ft=Re[$s],me=ft.bluetoothSpec;if(me)for(var ge=0;ge<me.length;ge++){var J=me[ge];gs.push(J.serviceUuid),ht[J.serviceUuid]=ht[J.serviceUuid.replace(/-/g,"")]=Ie({deviceModel:ft},J)}}var xe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(u){try{o(n.next(u))}catch(h){a(h)}}function l(u){try{o(n.throw(u))}catch(h){a(h)}}function o(u){u.done?s(u.value):i(u.value).then(c,l)}o((n=n.apply(r,e||[])).next())})},_e=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=o[0]&2?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){t.label=o[1];break}if(o[0]===6&&t.label<s[1]){t.label=s[1],s=o;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(o);break}s[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(u){o=[6,u],i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ys=[{vendorId:It}];function Rt(){return xe(this,void 0,void 0,function(){var r;return _e(this,function(e){switch(e.label){case 0:return[4,navigator.usb.requestDevice({filters:ys})];case 1:return r=e.sent(),[2,r]}})})}function Te(){return xe(this,void 0,void 0,function(){var r;return _e(this,function(e){switch(e.label){case 0:return[4,navigator.usb.getDevices()];case 1:return r=e.sent(),[2,r.filter(function(t){return t.vendorId===It})]}})})}function Is(){return xe(this,void 0,void 0,function(){var r;return _e(this,function(e){switch(e.label){case 0:return[4,Te()];case 1:return r=e.sent(),r.length>0?[2,r[0]]:[2,Rt()]}})})}var Rs=function(){return Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function")},Ts=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),x=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(u){try{o(n.next(u))}catch(h){a(h)}}function l(u){try{o(n.throw(u))}catch(h){a(h)}}function o(u){u.done?s(u.value):i(u.value).then(c,l)}o((n=n.apply(r,e||[])).next())})},_=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=o[0]&2?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){t.label=o[1];break}if(o[0]===6&&t.label<s[1]){t.label=s[1],s=o;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(o);break}s[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(u){o=[6,u],i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Ss=1,pt=3,As=function(r){Ts(e,r);function e(t,n){var i=r.call(this)||this;return i.channel=Math.floor(Math.random()*65535),i.packetSize=64,i._disconnectEmitted=!1,i._emitDisconnect=function(s){i._disconnectEmitted||(i._disconnectEmitted=!0,i.emit("disconnect",s))},i.device=t,i.interfaceNumber=n,i.deviceModel=ut(t.productId),i}return e.request=function(){return x(this,void 0,void 0,function(){var t;return _(this,function(n){switch(n.label){case 0:return[4,Rt()];case 1:return t=n.sent(),[2,e.open(t)]}})})},e.openConnected=function(){return x(this,void 0,void 0,function(){var t;return _(this,function(n){switch(n.label){case 0:return[4,Te()];case 1:return t=n.sent(),t.length===0?[2,null]:[2,e.open(t[0])]}})})},e.open=function(t){return x(this,void 0,void 0,function(){var n,i,s,a,c;return _(this,function(l){switch(l.label){case 0:return[4,t.open()];case 1:return l.sent(),t.configuration!==null?[3,3]:[4,t.selectConfiguration(Ss)];case 2:l.sent(),l.label=3;case 3:return[4,vt(t)];case 4:if(l.sent(),n=t.configurations[0].interfaces.find(function(o){var u=o.alternates;return u.some(function(h){return h.interfaceClass===255})}),!n)throw new Pe("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");i=n.interfaceNumber,l.label=5;case 5:return l.trys.push([5,7,,9]),[4,t.claimInterface(i)];case 6:return l.sent(),[3,9];case 7:return s=l.sent(),[4,t.close()];case 8:throw l.sent(),new Pe(s.message);case 9:return a=new e(t,i),c=function(o){t===o.device&&(navigator.usb.removeEventListener("disconnect",c),a._emitDisconnect(new xt))},navigator.usb.addEventListener("disconnect",c),[2,a]}})})},e.prototype.close=function(){return x(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return[4,this.exchangeBusyPromise];case 1:return t.sent(),[4,this.device.releaseInterface(this.interfaceNumber)];case 2:return t.sent(),[4,vt(this.device)];case 3:return t.sent(),[4,this.device.close()];case 4:return t.sent(),[2]}})})},e.prototype.exchange=function(t){return x(this,void 0,void 0,function(){var n,i=this;return _(this,function(s){switch(s.label){case 0:return[4,this.exchangeAtomicImpl(function(){return x(i,void 0,void 0,function(){var a,c,l,o,u,h,p,f,R,H;return _(this,function(X){switch(X.label){case 0:a=this,c=a.channel,l=a.packetSize,De("apdu","=> "+t.toString("hex")),o=Ft(c,l),u=o.makeBlocks(t),h=0,X.label=1;case 1:return h<u.length?[4,this.device.transferOut(pt,u[h])]:[3,4];case 2:X.sent(),X.label=3;case 3:return h++,[3,1];case 4:return(p=o.getReducedResult(f))?[3,6]:[4,this.device.transferIn(pt,l)];case 5:return R=X.sent(),H=Buffer.from(R.data.buffer),f=o.reduceResponse(f,H),[3,4];case 6:return De("apdu","<= "+p.toString("hex")),[2,p]}})})}).catch(function(a){throw a&&a.message&&a.message.includes("disconnected")?(i._emitDisconnect(a),new Lt(a.message)):a})];case 1:return n=s.sent(),[2,n]}})})},e.prototype.setScrambleKey=function(){},e.isSupported=Rs,e.list=Te,e.listen=function(t){var n=!1;Is().then(function(s){if(!n){var a=ut(s.productId);t.next({type:"add",descriptor:s,deviceModel:a}),t.complete()}},function(s){window.DOMException&&s instanceof window.DOMException&&s.code===18?t.error(new Ot(s.message)):t.error(new At(s.message))});function i(){n=!0}return{unsubscribe:i}},e}(Gt);function vt(r){return x(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.reset()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.warn(e),[3,3];case 3:return[2]}})})}export{As as default};
